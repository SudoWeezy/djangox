<div id="{{ modal_id }}-overlay" class="modal-overlay" style="display: none;" onclick="closeModal('{{ modal_id }}')"></div>

<div id="{{ modal_id }}" class="modal" style="display: none;">
    <div class="modal-content">
        {% if modal_form %}
            {{ modal_form }}
        {% endif %}  
    </div>
    <button type="button" class="btn btn-secondary" onclick="closeModal('{{ modal_id }}')">Close</button>
</div>
<script>
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
        document.getElementById(modalId + '-overlay').style.display = 'none';
        
    }
    htmx.on("htmx:afterSwap", (e) => {
        if (e.detail.target.closest('.modal-content')) {
            let modal = e.detail.target.closest('.modal');
            modal.style.display = 'flex';
            document.getElementById(modal.id + '-overlay').style.display = 'block';
        }
    });
</script>
